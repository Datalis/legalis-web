<div class="gazettes-container container-fluid container-lg px-0 px-md-4 py-4">
  <div class="row" *ngIf="!isLoading; else loading">
    <div class="col-lg-4 d-none d-lg-block">
      <app-filters [showState]="false" [showGazetteType]="true" [gazetteTypes]="types" [thematics]="thematics"
        [organisms]="organisms" (paramsChange)="onFiltersChange($event)" [params]="params" >
      </app-filters>
    </div>
    <div class="col-lg-8 col-12" id="content">
      <h5 class="text-accent mb-1 fw-bold mb-0 text-blue">INDICE DE GACETA</h5>
      <div class="d-lg-none mt-2"></div>
      <div class="resume-container d-none d-lg-flex px-4 py-3 row bg-blue-light mt-2 mx-0 text-start" *ngIf="resume">
        <h5 class="col-12 col-lg-2 text-blue fw-bold h-100 px-0">
          <span>{{ resume.year }}</span>
          -
          <span *ngIf="resume.year_end">{{ resume.year_end }}</span>
        </h5>
        <div class="col-12 col-lg-5 d-flex flex-column flex-grow-1 mt-2 mt-lg-0 h-100">
          <span class="fw-bold">{{ resume.gazettes.total }} GACETAS ORDINARIAS</span>
          <div class="mt-1">
            <ng-container *ngFor="let type of resume.gazettes.types">
              <div class="row">
                <small class="text-small col-2 text-end text-accent ps-0">{{ type.count }}</small>
                <small class="text-small col-10 ps-0">{{ type.type }}</small>
              </div>
            </ng-container>
          </div>
          <!--<small class="mt-1" ><span class="me-1 text-accent">{{ type?.count < 10 ? '&nbsp;' + type?.count : type?.count }}</span> {{ type?.type }}</small>-->
        </div>
        <div class="col-12 col-lg-5 d-flex flex-column mt-3 mt-lg-0 h-100">
          <span class="fw-bold">{{ resume.normatives.total }} NORMAS EMITIDAS</span>
          <div class="resume-item-list d-flex flex-column flex-wrap mt-1">
            <ng-container *ngFor="let type of resume.normatives.types">
              <div class="resume-item row">
                <small class="col-sm-2 text-small text-end text-accent ps-0">{{ type.count }}</small>
                <small class="col-sm-10 text-small ps-0">{{ type.normtype }}</small>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
      <ng-container *ngIf="results$ | async as res; else loading">
        <div class="d-flex flex-column text-center text-lg-start h-100">

          <div class="gazettes-container d-flex flex-column justify-content-start mb-2 flex-grow-1">
            <app-gazette-item class="mt-2"
              *ngFor="let gazette of res.results | paginate: { id: 'gazettes', itemsPerPage: params.page_size || 10, currentPage: params.page || 1, totalItems: res.count }"
              [item]="gazette">
            </app-gazette-item>
          </div>
        </div>
      </ng-container>

    </div>
    <div class="col-sm-12 mt-2">
      <pagination-controls [responsive]="true" id="gazettes" previousLabel="AtrÃ¡s" nextLabel="Siguiente"
        (pageChange)="getPage($event)"></pagination-controls>
      <div class="divider"></div>
    </div>
  </div>
  <ng-template #loading>
    <app-loader></app-loader>
  </ng-template>
</div>